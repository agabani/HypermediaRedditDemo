@model HypermediaClient.Hypermedia.Siren.Models.Entity

@{
    var entity = Model;
}

@section header
{
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container-fluid">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="#">Hypermedia Reddit</a>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                    @if (entity.Links != null)
                    {
                        foreach (var item in entity.Links.Where(link => link.Class.Contains("listing")))
                        {
                            <li>
                                <a href="@item.Href">@item.Title</a>
                            </li>
                        }
                    }
                </ul>
            </div>
        </div>
    </nav>
}

@if (entity.Links != null)
{
    <nav>
        <ul class="pager">

            @{
                var previousLink = entity.Links.SingleOrDefault(link => link.Rel.Contains("previous"));
            }
            @if (previousLink != null)
            {
                <li class="previous"><a href="@previousLink.Href"><span aria-hidden="true">&larr;</span> Prev</a></li>
            }
            else
            {
                <li class="previous disabled"><a href="#"><span aria-hidden="true">&larr;</span> Prev</a></li>
            }

            @{
                var nextLink = entity.Links.SingleOrDefault(link => link.Rel.Contains("next"));
            }
            @if (nextLink != null)
            {
                <li class="next"><a href="@nextLink.Href">Next <span aria-hidden="true">&rarr;</span></a></li>
            }
            else
            {
                <li class="next disabled"><a href="#">Next <span aria-hidden="true">&rarr;</span></a></li>
            }
        </ul>
    </nav>
}

@if (entity.Entities != null)
{
    foreach (var post in entity.Entities.Where(e => e.Class.Contains("post")))
    {
        <div class="row well">
            <div class="col-sm-1 text-center">
                <i class="fa fa-arrow-up" aria-hidden="true"></i>
                <div>
                    @post.Properties["score"]
                </div>
                <i class="fa fa-arrow-down" aria-hidden="true"></i>
            </div>
            <div class="col-sm-11">
                <p>
                    <a href="@post.Links.Single(link => link.Rel.Contains("self")).Href">@post.Title</a>
                    <small>(@post.Properties["domain"])</small>
                </p>

                <p>@post.Properties["comments"] comments @post.Properties["subreddit"]</p>
            </div>
        </div>
    }
}